function XmlRequest(a,b){if(void 0===a||"object"!=typeof a)return void console.error("Can't find a 'params' argument.");for(var c in paramsInfo)try{if(void 0===a[c])void 0!==paramsInfo[c].ifundef&&("function"==typeof paramsInfo[c].ifundef?paramsInfo[c].ifundef():a[c]=paramsInfo[c].ifundef);else if(typeof a[c]!=paramsInfo[c].type)throw new Error("Wrong parameter '"+c+"'. <"+paramsInfo[c].type+"> expected, but <"+typeof a[c]+"> was given.")}catch(a){return void console.error(a)}try{if(void 0===b&&void 0===a.success)throw new Error("Cannot find a callback function for sendRequestWithJSON().");if("function"!=typeof b&&void 0===a.success)throw new Error("Wrong argument 'callback'. Function expected, but "+typeof b+" was given.");void 0!==b&&(a.success=b)}catch(a){return void console.error(a)}null!=a.data?a.data.url=window.location.href:a.data={url:window.location.href},a.data=JSON.stringify(a.data);var d=new XMLHttpRequest;d.upload.onprogress=function(b){void 0!==a.progress&&"function"==typeof a.progress&&a.progress(b.loaded,b.total)},d.onreadystatechange=function(){if(4===d.readyState)if(200!==d.status)console.log(d.status+": "+d.statusText),void 0!==a.error&&a.error(d.status,d.statusText);else{var b={};try{b={status:d.status,response:JSON.parse(d.responseText)}}catch(a){b={status:d.status,response:d.responseText}}a.success(b)}},d.open(a.method,a.url,!0);var e="json";if(void 0!==a.file&&null!=a.file&&"object"==typeof a.file&&(e="file",requestTypes[e]=a.file.type),"json"==e)d.setRequestHeader("Content-Type",requestTypes[e]),d.send(a.data);else{var f=new FormData;null!=a.data&&f.append("wbFields",a.data);try{if(a.file[0].size<=0||void 0===a.file[0].size)throw new Error("Bad file given!")}catch(a){return void console.error(a.stack)}for(var g=0;g<a.file.length;g++)f.append("wbfile_"+g,a.file[g]);d.send(f)}}function filePicker(a){this.picker=document.createElement("input");var b=this.picker;b.type="file",b.multiple=a||!1,b.name="wbPicker_"+1e6*Math.random(),b.style.position="fixed",b.style.top=0,b.style.marginTop="-40px",b.style.opacity="0",document.getElementsByTagName("html")[0].appendChild(b)}var delTimer=null,paramsInfo={url:{type:"string",ifundef:function(){throw new Error("Can't find a 'url' parameter.")}},method:{type:"string",ifundef:function(){throw new Error("Can't find a 'method' parameter.")}},data:{type:"object",ifundef:null},file:{type:"object",ifundef:null},success:{type:"function"},error:{type:"function"}},requestTypes={json:"application/json;charset=UTF-8",file:"multipart/form-data"};filePicker.prototype.pick=function(){this.picker.click()},filePicker.prototype.onchange=function(a){var b=this.picker;void 0!==a&&"function"==typeof a&&(b.onchange=function(){a(b.files)})},filePicker.prototype.isEmpty=function(){return!this.picker.files[0]},filePicker.prototype.getFiles=function(){return this.picker.files},filePicker.prototype.remove=function(){document.body.removeChild(this.picker)};